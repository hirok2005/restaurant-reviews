<!DOCTYPE html>
<html lang="en" data-bs-theme="light">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Restaurant Reviews</title>
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link href="style.css" rel="stylesheet">
</head>

<body>
  <!-- nav bar for changing search type and colour mode -->
  <nav class="navbar navbar-expand-sm border-bottom">
    <a class="navbar-brand p-2">Restaurant</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="nav-link" id="restaurant" href="#" onclick="changeType(1)">Restaurants</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="changeType(0)">Events</a>
        </li>
      </ul>
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault"
              onclick="changeColourMode()">
            <label class="form-check-label" for="flexSwitchCheckDefault">Dark Mode</label>
          </div>
        </li>
      </ul>
    </div>
  </nav>
  <div id="main-content">
    <div id="search-view" class="container-fluid view">
      <h1 id="searchTypeName" class="mx-auto">Restaurants</h1>
      <form id="search-form">
        <div class="input-group mx-auto w-75">
          <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"
            aria-expanded="false">Filters</button>
          <ul class="dropdown-menu">
            <li>
              <div class="p-2" id="ratings">
                <h5>Rating</h5>
                <div class="form-check form-check-inline">
                  <label class="form-check-label" for="0">
                    <input class="form-check-input" type="radio" name="rating" id="0" value="0" checked="checked">
                    0 and up
                  </label>
                </div>
                <div class="form-check form-check-inline">
                  <label class="form-check-label" for="1">
                    <input class="form-check-input" class="form-check-input" type="radio" name="rating" id="1"
                      value="1">
                    1 and up
                  </label>
                </div>
                <div class="form-check form-check-inline">
                  <label class="form-check-label" for="2">
                    <input class="form-check-input" type="radio" name="rating" id="2" value="2">
                    2 and up
                  </label>
                </div>
                <div class="form-check form-check-inline">
                  <label class="form-check-label" for="3">
                    <input class="form-check-input" type="radio" name="rating" id="3" value="3">
                    3 and up
                  </label>
                </div>
                <div class="form-check form-check-inline">
                  <label class="form-check-label" for="4">
                    <input class="form-check-input" type="radio" name="rating" id="4" value="4">
                    4 and up
                  </label>
                </div>
                <div class="form-check form-check-inline">
                  <label class="form-check-label" for="5">
                    <input class="form-check-input" type="radio" name="rating" id="5" value="5">
                    5 and up
                  </label>
                </div>
              </div>
            </li>
            <li>
              <div class="p-2"><input class="form-control w-auto btn-sm btn-md-none" id="citySearch" name="city"
                  type="text" placeholder="City" /></div>
            </li>
          </ul>
          <input class="form-control" id="name" name="name" type="text" class="form-control" />
          <button class="btn btn-primary btn-sm btn-md-none" type="submit">Search</button>
        </div>
      </form>
      <div class="container">
        <div id="results" class="row row-cols-1 row-cols-sm-2 row-cols-md-3 w-75 mt-3 mx-auto"></div>
      </div>
      <div class="container container-sm container-md-none w-100" id="addRestaurantForm">
        <p class="d-inline-flex gap-1 w-100">
          <a class="btn btn-primary btn-block" data-bs-toggle="collapse" href="#collapseForm" role="button"
            aria-expanded="false" aria-controls="collapseForm" id="collapseLabel">
            Add a restaurant
          </a>
        </p>
        <div class="collapse" id="collapseForm">
          <div class="card card-body">
            <form id="restaurantForm">
              <div class="mb-3">
                <label for="name" class="form-label" id="nameLabel">Restaurant Name</label>
                <input type="text" class="form-control" id="nameForm" name="name" minlength="3" maxlength="30" required>
              </div>
              <div class="mb-3">
                <label for="desc" class="form-label">Description</label>
                <textarea class="form-control" id="desc" name="description" rows="3" minlength="15" maxlength="200"
                  required></textarea>
              </div>
              <div class="mb-3">
                <label for="street" class="form-label" id="streetLabel">Street</label>
                <input type="text" class="form-control" id="street" name="street" minlength="3" maxlength="30" required>
              </div>
              <div class="mb-3">
                <label for="city" class="form-label" id="cityLabel">City</label>
                <input type="text" class="form-control" id="city" name="city" minlength="3" maxlength="30" required>
              </div>
              <div class="mb-3">
                <label for="address" class="form-label" id="addressLabel">Address</label>
                <input type="text" class="form-control" id="address" name="address" minlength="3" maxlength="30"
                  required>
              </div>
              <div class="mb-3">
                <label for="phoneNumber" class="form-label" id="phoneNumberLabel">Phone Number</label>
                <input type="tel" class="form-control" id="phoneNumber" name="phone_number" pattern="07\d{9}" required>
              </div>
              <div class="mb-3">
                <div class="container">
                  <p class="d-inline-flex">
                    <a class="btn btn-primary btn-block" data-bs-toggle="collapse" href="#collapseTimes" role="button"
                      aria-expanded="false" aria-controls="collapseTimes">
                      Opening Times
                    </a>
                  </p>
                  <div class="collapse" id="collapseTimes">
                    <div class="mb-2">
                      <p>Monday</p>
                      <label for="mondayOpen">Open:</label>
                      <input class="form-control" type="time" id="mondayOpen" name="mondayOpen">
                      <label for="mondayClose">Close:</label>
                      <input class="form-control" type="time" id="mondayClose" name="mondayClose">
                    </div>

                    <div class="mb-2">
                      <p>Tuesday</p>
                      <label for="tuesdayOpen">Open:</label>
                      <input class="form-control" type="time" id="tuesdayOpen" name="tuesdayOpen">
                      <label for="tuesdayClose">Close:</label>
                      <input class="form-control" type="time" id="tuesdayClose" name="tuesdayClose">
                    </div>

                    <div class="mb-2">
                      <p>Wednesday</p>
                      <label for="wednesdayOpen">Open:</label>
                      <input class="form-control" type="time" id="wednesdayOpen" name="wednesdayOpen">
                      <label for="wednesdayClose">Close:</label>
                      <input class="form-control" type="time" id="wednesdayClose" name="wednesdayClose">
                    </div>

                    <div class="mb-2">
                      <p>Thursday</p>
                      <label for="thursdayOpen">Open:</label>
                      <input class="form-control" type="time" id="thursdayOpen" name="thursdayOpen">
                      <label for="thursdayClose">Close:</label>
                      <input class="form-control" type="time" id="thursdayClose" name="thursdayClose">
                    </div>

                    <div class="mb-2">
                      <p>Friday</p>
                      <label for="fridayOpen">Open:</label>
                      <input class="form-control" type="time" id="fridayOpen" name="fridayOpen">

                      <label for="fridayClose">Close:</label>
                      <input class="form-control" type="time" id="fridayClose" name="fridayClose">
                    </div>

                    <div class="mb-2">
                      <p>Saturday</p>
                      <label for="saturdayOpen">Open:</label>
                      <input class="form-control" type="time" id="saturdayOpen" name="saturdayOpen">
                      <label for="saturdayClose">Close:</label>
                      <input class="form-control" type="time" id="saturdayClose" name="saturdayClose">
                    </div>

                    <div class="mb-2">
                      <p>Sunday</p>
                      <label for="sundayOpen">Open:</label>
                      <input class="form-control" type="time" id="sundayOpen" name="sundayOpen">
                      <label for="sundayClose">Close:</label>
                      <input class="form-control" type="time" id="sundayClose" name="sundayClose">
                    </div>
                  </div>
                </div>
              </div>
              <button type="submit" class="btn btn-primary">Add</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="d-flex align-items-center justify-content-center">
    <div class="spinner-border" role="status" id="spinner" style="display: none;">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <div id="restaurant-view" class="view" style="display: none;">
    <h1 class="mx-auto" id="nameTitle"></h1>
    <label for="imgInput">
      <h8>Add an image</h8>
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-square"
        viewBox="0 0 16 16">
        <path
          d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z" />
        <path
          d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4" />
      </svg>
    </label>
    <input type="file" id="imgInput" style="display:none" onchange="uploadImg(this.files)">
    <h6 id="currentlyOpen"></h6>
    <div id="imgCarousel" class="carousel slide p-5">
      <div id="imgHolder" class="carousel-inner">
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#imgCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#imgCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
    <p class="p-5 mb-2" id="description"></p>
    <div class="container">
      <div class="row mx-auto">
        <div class="col-md-6 mb-3">
          <h2>Opening Times</h2>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th scope="col">Day</th>
                <th scope="col">Opens</th>
                <th scope="col">Closes</th>
              </tr>
            </thead>
            <tbody id="tableBody">
            </tbody>
          </table>
        </div>
        <div class="col-md-6 mb-3 mx-auto">
          <h2>Info</h2>
          <!-- svg from https://icons.getbootstrap.com/icons/geo-alt-fill/ -->
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-geo-alt-fill"
            viewBox="0 0 16 16">
            <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10m0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6" />
          </svg>
          <p id="addressInfo"></p>
          <!-- svg from https://icons.getbootstrap.com/icons/telephone/ -->
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-telephone"
            viewBox="0 0 16 16">
            <path
              d="M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.6 17.6 0 0 0 4.168 6.608 17.6 17.6 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.68.68 0 0 0-.58-.122l-2.19.547a1.75 1.75 0 0 1-1.657-.459L5.482 8.062a1.75 1.75 0 0 1-.46-1.657l.548-2.19a.68.68 0 0 0-.122-.58zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z" />
          </svg>
          <p id="phoneNumberInfo"></p>
          <div class="row-cols-sm-1 row-cols-md-2">
            <div class="col w-50">
              <p id="ratingInfo"></p>
            </div>
            <div class="col" id="starsInfo"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row mx-auto justify-content-center">
        <div class="col-md-6 mb-3">
          <h2>Reviews</h2>
          <div class="overflow-auto border" id="reviews"></div>
        </div>
        <div class="col-md-6 mb-3">
          <h2>Events</h2>
          <div class="overflow-auto border" id="events"></div>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="row mx-auto justify-content-center">
        <div class="col-md-6 mb-3">
          <div class="container container-sm container-md-none w-100">
            <p class="d-inline-flex gap-1 w-100">
              <a class="btn btn-primary btn-block" data-bs-toggle="collapse" href="#collapseFormReview" role="button"
                aria-expanded="false" aria-controls="collapseFormReview" id="collapseLabelFormReview">
                Add a review
              </a>
            </p>
            <div class="collapse" id="collapseFormReview">
              <div class="card card-body">
                <form id="review-form">
                  <div class="mb-3">
                    <label for="reviewTitle" class="form-label" id="reviewTitleLabel">Title</label>
                    <input type="text" class="form-control" id="reviewTitle" name="title" minlength="3" maxlength="30"
                      required>
                  </div>
                  <div class="mb-3">
                    <label for="nameReview" class="form-label">Name</label>
                    <input class="form-control" id="nameReview" name="name" minlength="3" maxlength="30" required>
                  </div>
                  <div class="mb-3">
                    <label for="descReview" class="form-label">Description</label>
                    <textarea class="form-control" id="descReview" name="description" rows="3" minlength="10"
                      maxlength="250" required></textarea>
                  </div>
                  <div class="mb-3">
                    <label class="form-label">Rating</label>
                    <!-- https://getbootstrap.com/docs/5.3/forms/checks-radios/ -->
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="radio" name="rating" id="1star" value="1" checked>
                      <label class="form-check-label" for="1star">1</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="radio" name="rating" id="2star" value="2">
                      <label class="form-check-label" for="2star">2</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="radio" name="rating" id="3star" value="3">
                      <label class="form-check-label" for="3star">3</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="radio" name="rating" id="4star" value="4">
                      <label class="form-check-label" for="4star">4</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="radio" name="rating" id="5star" value="5">
                      <label class="form-check-label" for="5star">5</label>
                    </div>
                  </div>
                  <button type="submit" class="btn btn-primary">Add</button>
                </form>
              </div>
            </div>
          </div>
        </div>

          <div class="col-sm-12 mb-3">
            <div class="container container-sm container-md-none w-100">
              <p class="d-inline-flex gap-1 w-100">
                <a class="btn btn-primary btn-block" data-bs-toggle="collapse" href="#collapseFormEvent" role="button"
                  aria-expanded="false" aria-controls="collapseFormEvent" id="collapseLabelFormEvent">
                  Add an event
                </a>
              </p>
              <div class="collapse" id="collapseFormEvent">
                <div class="card card-body">
                  <form id="event-form">
                    <div class="mb-3">
                      <label for="eventName" class="form-label" id="eventNameLabel">Name</label>
                      <input class="form-control" type="text" id="eventName" name="name" minlength="3" maxlength="30"
                        required>
                    </div>
                    <div class="mb-3">
                      <label for="descEvent" class="form-label">Description</label>
                      <textarea class="form-control" id="descEvent" name="description" minlength="10" maxlength="250"
                        required></textarea>
                    </div>
                    <div class="mb-3">
                      <label for="eventStart">Start date</label>
                      <input class="form-control" type="datetime-local" id="eventStart" name="start" required>
                    </div>
                    <div class="mb-3">
                      <label for="eventEnd">Start date</label>
                      <input class="form-control" type="datetime-local" id="eventEnd" name="end" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Add</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="reviewModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1>Review</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <h1 class="modal-title fs-5" id="infoTitleModal" style="text-align: left;"></h1>
            <div id="infoBody"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="eventModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1>Event</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="infoBody">
          <h1 class="modal-title fs-5" id="eventTitleModal" style="text-align: left;"></h1>
          <p id="times"></p>
          <img id="restaurantImg" style="text-align: center; max-width: 100%; max-height: 400px;">
          <p id="eventDescription"></p>
          <p id="currentlyOnEvent"></p>
          <button class="btn btn-primary btn-sm btn-md-none" id="openRestaurantPage">Restaurant Page</button>
        </div>
      </div>
    </div>
  </div>
  </div>

  <div class="modal fade" id="errorModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-body" id="errorBody"></div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
  <script src="index.js"></script>

</body>

</html>